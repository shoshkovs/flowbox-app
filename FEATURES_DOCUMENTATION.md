# üìã –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º

## 1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ú–æ–∏ –∞–¥—Ä–µ—Å–∞" —Å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ —É–¥–∞–ª–µ–Ω–∏–µ–º

### –û–ø–∏—Å–∞–Ω–∏–µ
–ù–∞ —à–∞–≥–µ 4 (–ò—Ç–æ–≥–æ) –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ —Å—Ç—Ä–µ–ª–∫—É —Ä—è–¥–æ–º —Å –∞–¥—Ä–µ—Å–æ–º –¥–æ—Å—Ç–∞–≤–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –≤—Å–µ—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è.

### UX Flow

**–®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç–∏–µ —Å–ø–∏—Å–∫–∞ –∞–¥—Ä–µ—Å–æ–≤**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ —à–∞–≥–µ 4 –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ —Å—Ç—Ä–µ–ª–∫—É —Ä—è–¥–æ–º —Å "–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏"
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ "–ú–æ–∏ –∞–¥—Ä–µ—Å–∞" —Å –ø–æ–ª–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –≤—Å–µ—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤

**–®–∞–≥ 2: –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∞–¥—Ä–µ—Å–∞–º–∏**
- –ö–∞–∂–¥—ã–π –∞–¥—Ä–µ—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ –∫–∞—Ä—Ç–æ—á–∫–∏
- –°–ø—Ä–∞–≤–∞ —É –∫–∞–∂–¥–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –µ—Å—Ç—å –∏–∫–æ–Ω–∫–∞ —Å —Ç—Ä–µ–º—è —Ç–æ—á–∫–∞–º–∏ (‚ãÆ)
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–µ–Ω—é:
  - **–ò–∑–º–µ–Ω–∏—Ç—å** - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
  - **–£–¥–∞–ª–∏—Ç—å** - —É–¥–∞–ª—è–µ—Ç –∞–¥—Ä–µ—Å —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å–∞–º—É –∫–∞—Ä—Ç–æ—á–∫—É –∞–¥—Ä–µ—Å–∞ - –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å –∏ –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞ —à–∞–≥ 4

**–®–∞–≥ 3: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞**
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ —Å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞
- –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:
  - –ê–¥—Ä–µ—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ –ë–î (UPDATE, –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π)
  - –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ —à–∞–≥ 4 —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

**–®–∞–≥ 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–¥—Ä–µ—Å–∞**
- –í–Ω–∏–∑—É —Å–ø–∏—Å–∫–∞ –∫–Ω–æ–ø–∫–∞ "+ –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å"
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∞–¥—Ä–µ—Å–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

**–§–∞–π–ª—ã:**
- `public/index.html` - HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∫–ª–∞–¥–∫–∏ `myAddressesTab`
- `public/app.js` - —Ñ—É–Ω–∫—Ü–∏–∏:
  - `openMyAddressesPage()` - –æ—Ç–∫—Ä—ã—Ç–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–ø–∏—Å–∫–∞ –∞–¥—Ä–µ—Å–æ–≤
  - `renderMyAddressesList()` - —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–ø–∏—Å–∫–∞ –∞–¥—Ä–µ—Å–æ–≤ —Å –º–µ–Ω—é
  - `selectAddressFromMyAddresses(addressId)` - –≤—ã–±–æ—Ä –∞–¥—Ä–µ—Å–∞
  - `editAddressFromMyAddresses(addressId)` - –æ—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  - `deleteAddressFromMyAddresses(addressId)` - —É–¥–∞–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞
  - `toggleAddressMenu(addressId)` - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–Ω—é
  - `openEditAddressPageFromList(address)` - –æ—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏
  - `saveEditAddress()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –¢–∞–±–ª–∏—Ü–∞ `addresses` —Å –ø–æ–ª—è–º–∏: `id`, `user_id`, `city`, `street`, `house`, `apartment`, `floor`, `entrance`, `intercom`, `comment`
- –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `UPDATE addresses WHERE id = ?`
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `DELETE FROM addresses WHERE id = ?`

**API:**
- `POST /api/user-data` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç UPDATE –∏ INSERT)
- `GET /api/user-data/:userId` - –∑–∞–≥—Ä—É–∑–∫–∞ –∞–¥—Ä–µ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## 2. –ü–æ–ª–µ "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∫ –∑–∞–∫–∞–∑—É"

### –û–ø–∏—Å–∞–Ω–∏–µ
–ü–æ–ª–µ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –∫–ª–∏–µ–Ω—Ç–∞, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –Ω–∞ —à–∞–≥–µ 4 (–ò—Ç–æ–≥–æ) –ø–æ—Å–ª–µ –∫–æ—Ä–∑–∏–Ω—ã, –ø–µ—Ä–µ–¥ –∏—Ç–æ–≥–æ–≤–æ–π —Å—É–º–º–æ–π.

### UX

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:**
- **–®–∞–≥ 4 (–ò—Ç–æ–≥–æ)**: –ü–æ—Å–ª–µ –±–ª–æ–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã, –ø–µ—Ä–µ–¥ "–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ"
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"
- –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä: "–û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∫ –∑–∞–∫–∞–∑—É"
- –¢–∏–ø: `textarea`, 3 —Å—Ç—Ä–æ–∫–∏

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–≤–µ—Å—Ç–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–∞ —à–∞–≥–µ 4
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `checkoutData.orderComment`
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –∫–∞–∫ `user_comment` (–æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç `courier_comment`)

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

**–§–∞–π–ª—ã:**
- `public/index.html` - –ø–æ–ª–µ `textarea` —Å `id="orderCommentField"` –Ω–∞ —à–∞–≥–µ 4
- `public/app.js`:
  - `checkoutData.orderComment` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ `initCheckoutSteps()`
  - –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ `validateAndSubmitOrder()`

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –¢–∞–±–ª–∏—Ü–∞ `orders`, –ø–æ–ª–µ `user_comment` (TEXT)
- –û—Ç–¥–µ–ª—å–Ω–æ –æ—Ç `courier_comment` (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –∫—É—Ä—å–µ—Ä–∞)

**API:**
- `POST /api/orders` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–ª–µ `comment` –∏–ª–∏ `userComment`
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `orders.user_comment`

---

## 3. –ß–µ–∫–±–æ–∫—Å "–û—Å—Ç–∞–≤–∏—Ç—å —É –¥–≤–µ—Ä–∏"

### –û–ø–∏—Å–∞–Ω–∏–µ
–ù–æ–≤–∞—è –æ–ø—Ü–∏—è –¥–ª—è –∑–∞–∫–∞–∑–æ–≤: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ –∑–∞–∫–∞–∑ –Ω—É–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —É –¥–≤–µ—Ä–∏ –±–µ–∑ –≤—Å—Ç—Ä–µ—á–∏ —Å –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º.

### UX

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:**
- **–®–∞–≥ 3 (–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è)**: –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏, –ø–µ—Ä–µ–¥ –∫–Ω–æ–ø–∫–æ–π "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"
- **–®–∞–≥ 4 (–ò—Ç–æ–≥–æ)**: –í –±–ª–æ–∫–µ "–î–æ—Å—Ç–∞–≤–∫–∞", –ø–æ—Å–ª–µ "–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏"

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
- –ß–µ–∫–±–æ–∫—Å —Å –ø–æ–¥–ø–∏—Å—å—é "–û—Å—Ç–∞–≤–∏—Ç—å —É –¥–≤–µ—Ä–∏"
- –ù–∞ —à–∞–≥–µ 3 - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —á–µ–∫–±–æ–∫—Å –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ù–∞ —à–∞–≥–µ 4 - —Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: "–û—Å—Ç–∞–≤–∏—Ç—å —É –¥–≤–µ—Ä–∏: –î–∞/–ù–µ—Ç"

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ó–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `checkoutData.leaveAtDoor`
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –º–µ–∂–¥—É —à–∞–≥–∞–º–∏ 3 –∏ 4
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

**–§–∞–π–ª—ã:**
- `public/index.html`:
  - –®–∞–≥ 3: `<input type="checkbox" id="leaveAtDoorCheckbox">`
  - –®–∞–≥ 4: `<div id="summaryLeaveAtDoor">–î–∞/–ù–µ—Ç</div>`
- `public/app.js`:
  - `checkoutData.leaveAtDoor` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ `initCheckoutSteps()`
  - –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ `validateAndSubmitOrder()` –∫–∞–∫ `leaveAtDoor: true/false`

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –¢–∞–±–ª–∏—Ü–∞ `orders`, –Ω–æ–≤–æ–µ –ø–æ–ª–µ `leave_at_door` (BOOLEAN, DEFAULT FALSE)
- –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

**API:**
- `POST /api/orders` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–ª–µ `leaveAtDoor`
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `orders.leave_at_door`

**–ê–¥–º–∏–Ω–∫–∞:**
- –í –∫–∞—Ä—Ç–æ—á–∫–µ –∑–∞–∫–∞–∑–∞ –≤ –±–ª–æ–∫–µ "–î–æ—Å—Ç–∞–≤–∫–∞" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
  - –ò–∫–æ–Ω–∫–∞ üö™ –∏ —Ç–µ–∫—Å—Ç "–û—Å—Ç–∞–≤–∏—Ç—å —É –¥–≤–µ—Ä–∏" (–µ—Å–ª–∏ `leave_at_door = true`)
  - –§–∞–π–ª: `admin/src/components/orders/OrderDetail.jsx`

---

## 4. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–æ—Ä—É–º-—Ç–æ–ø–∏–∫–æ–≤

### –û–ø–∏—Å–∞–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏, –≥–¥–µ –∫–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–æ—Ä—É–º-—Ç–æ–ø–∏–∫ –≤ –≥—Ä—É–ø–ø–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏. –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–¥—É—Ç –≤ –µ–≥–æ —Ç–æ–ø–∏–∫, –º–µ–Ω–µ–¥–∂–µ—Ä—ã –æ—Ç–≤–µ—á–∞—é—Ç –≤ —Ç–æ–ø–∏–∫–µ, –æ—Ç–≤–µ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

### UX Flow

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –±–æ—Ç—É –ª–∏—á–Ω–æ (–∫–æ–º–∞–Ω–¥–∞ `/support` –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ)
2. –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –∏–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç —Ç–æ–ø–∏–∫ –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ç–æ–ø–∏–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è (–ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é)

**–î–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞:**
1. –í —Ñ–æ—Ä—É–º-—á–∞—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–æ–ø–∏–∫
2. –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–ø–∏–∫–∞: `–¢–∏–∫–µ—Ç {user_id} ({username})`
3. –í —Ç–æ–ø–∏–∫–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —à–∞–ø–∫–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
4. –ù–∏–∂–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∏—à–µ—Ç –æ—Ç–≤–µ—Ç –ø—Ä—è–º–æ –≤ —Ç–æ–ø–∏–∫–µ
6. –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
7. –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: "‚úÖ –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é"

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ:**
1. –ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **—Ñ–æ—Ä—É–º–æ–º** (—Å—É–ø–µ—Ä–≥—Ä—É–ø–ø–∞ —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ Topics)
2. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —Å –ø—Ä–∞–≤–∞–º–∏:
   - ‚úÖ **Manage Topics** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
   - ‚úÖ **Send messages**
   - ‚úÖ **Delete messages** (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ)

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –¢–∞–±–ª–∏—Ü–∞ `support_topics`:
  ```sql
  CREATE TABLE support_topics (
    id SERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL,
    message_thread_id INTEGER NOT NULL,
    topic_name TEXT,
    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    UNIQUE(user_id),
    UNIQUE(message_thread_id)
  );
  ```
- –ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- –ï—Å–ª–∏ –∫–æ–ª–æ–Ω–∫–∏ `message_thread_id` –∏–ª–∏ `topic_name` –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, –æ–Ω–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**API –º–µ—Ç–æ–¥—ã Telegram:**
- `createForumTopic` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–æ–ø–∏–∫–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `sendMessage` —Å `message_thread_id` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–ø–∏–∫
- `copyMessage` —Å `message_thread_id` - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–∏–∞ –≤ —Ç–æ–ø–∏–∫

**–§–∞–π–ª—ã:**
- `bot.js`:
  - `getOrCreateSupportTopic(userId, userName, username)` - –ø–æ–ª—É—á–µ–Ω–∏–µ/—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ø–∏–∫–∞
  - `getUserIdByThreadId(messageThreadId)` - –ø–æ–ª—É—á–µ–Ω–∏–µ userId –ø–æ —Ç–æ–ø–∏–∫—É
  - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `bot.on('message')` –¥–ª—è –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
  - `sendManagerReplyToUser(ctx, userId)` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
- `SUPPORT_CHAT_ID` - ID —Ñ–æ—Ä—É–º-—á–∞—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ)

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–û—à–∏–±–∫–∞: "CHAT_FORUM_REQUIRED"**
- –ß–∞—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ñ–æ—Ä—É–º–æ–º
- –†–µ—à–µ–Ω–∏–µ: –í–∫–ª—é—á–∏—Ç—å Topics –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —á–∞—Ç–∞

**–û—à–∏–±–∫–∞: "CHAT_ADMIN_REQUIRED"**
- –ë–æ—Ç –Ω–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏–ª–∏ –Ω–µ—Ç –ø—Ä–∞–≤ "Manage Topics"
- –†–µ—à–µ–Ω–∏–µ: –î–∞—Ç—å –±–æ—Ç—É –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å "Manage Topics"

**–û—à–∏–±–∫–∞: "column 'message_thread_id' does not exist"**
- –¢–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞, –Ω–æ –∫–æ–ª–æ–Ω–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- –†–µ—à–µ–Ω–∏–µ: –ú–∏–≥—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –∫–æ–ª–æ–Ω–∫—É –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ

**–û—à–∏–±–∫–∞: "–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —ç—Ç–æ–≥–æ —Ç–æ–ø–∏–∫–∞"**
- –¢–æ–ø–∏–∫ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ —Å–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –ë–î
- Fallback: —Å–∏—Å—Ç–µ–º–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –∏–∑–≤–ª–µ—á—å userId –∏–∑ —Ç–µ–∫—Å—Ç–∞ —à–∞–ø–∫–∏ —Ç–æ–ø–∏–∫–∞

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –¢–µ–∫—Å—Ç
- ‚úÖ –§–æ—Ç–æ
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç—ã
- ‚úÖ –í–∏–¥–µ–æ
- ‚úÖ –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

---

## 5. Placeholder –¥–ª—è –ø–æ–ª–µ–π "–£–ª–∏—Ü–∞, –¥–æ–º"

### –û–ø–∏—Å–∞–Ω–∏–µ
–û–±–Ω–æ–≤–ª–µ–Ω placeholder –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ –∞–¥—Ä–µ—Å–∞ (—É–ª–∏—Ü–∞, –¥–æ–º).

### –ò–∑–º–µ–Ω–µ–Ω–∏—è
- –°—Ç–∞—Ä—ã–π placeholder: "–í–≤–µ–¥–∏—Ç–µ —É–ª–∏—Ü—É, –¥–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç 10–∫2)"
- –ù–æ–≤—ã–π placeholder: "–ù–∞–ø—Ä–∏–º–µ—Ä –ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 10–∫2"

**–§–∞–π–ª—ã:**
- `public/index.html` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–ª—è:
  - `addressStreet` (–≤–∫–ª–∞–¥–∫–∞ –∞–¥—Ä–µ—Å–æ–≤)
  - `orderAddressStreet` (—à–∞–≥ 2 –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è)
  - `editAddressStreet` (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞)

---

## –û–±—â–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ù–∞–≤–∏–≥–∞—Ü–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `goToStep(step)` –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É —à–∞–≥–∞–º–∏
- –í—Å–µ –≤–∫–ª–∞–¥–∫–∏ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º –Ω—É–∂–Ω–æ–≥–æ —à–∞–≥–∞
- BackButton –æ—Ç Telegram –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞–∑–∞–¥

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- `checkoutData` - –æ–±—ä–µ–∫—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
- –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –º–µ–∂–¥—É —à–∞–≥–∞–º–∏
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∏–∑ localStorage

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∞–¥—Ä–µ—Å–æ–≤
- –ê–¥—Ä–µ—Å–∞ –±–µ–∑ ID —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- –í —Å–ø–∏—Å–∫–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–¥—Ä–µ—Å–∞ —Å –≤–∞–ª–∏–¥–Ω—ã–º ID

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î –æ–±–µ—Ä–Ω—É—Ç—ã –≤ try-catch
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ú–æ–∏ –∞–¥—Ä–µ—Å–∞"
- [ ] –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Ç—Ä–µ–ª–∫—É –Ω–∞ —à–∞–≥–µ 4
- [ ] –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞
- [ ] –ú–µ–Ω—é —Å —Ç—Ä–µ–º—è —Ç–æ—á–∫–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∞–¥—Ä–µ—Å
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- [ ] –í—ã–±–æ—Ä –∞–¥—Ä–µ—Å–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ —à–∞–≥ 4
- [ ] –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å" —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É
- [ ] –ü–æ–ª–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —à–∞–≥–µ 4 –ø–æ—Å–ª–µ –∫–æ—Ä–∑–∏–Ω—ã
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –∫–∞–∫ `user_comment`
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω–∫–µ

### –ß–µ–∫–±–æ–∫—Å "–û—Å—Ç–∞–≤–∏—Ç—å —É –¥–≤–µ—Ä–∏"
- [ ] –ß–µ–∫–±–æ–∫—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —à–∞–≥–µ 3
- [ ] –ó–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —à–∞–≥–µ 4
- [ ] –ó–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –∫–∞–∫ `leave_at_door`
- [ ] –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω–∫–µ

### –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- [ ] –ß–∞—Ç —è–≤–ª—è–µ—Ç—Å—è —Ñ–æ—Ä—É–º–æ–º (Topics –≤–∫–ª—é—á–µ–Ω—ã)
- [ ] –ë–æ—Ç –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ "Manage Topics"
- [ ] –¢–æ–ø–∏–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ–ø–∞–¥–∞—é—Ç –≤ —Ç–æ–ø–∏–∫
- [ ] –û—Ç–≤–µ—Ç—ã –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- [ ] –°–≤—è–∑—å —Ç–æ–ø–∏–∫-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-12-09
**–í–µ—Ä—Å–∏—è:** 1.0
