<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>FlowBox - –ú–∞–≥–∞–∑–∏–Ω —Ü–≤–µ—Ç–æ–≤</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <img src="logo.png" alt="FlowBox" class="logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
            <h1 style="display:none;">üå∏ FlowBox</h1>
        </header>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main-content" id="mainContent">
            <!-- –í–∫–ª–∞–¥–∫–∞: –ú–µ–Ω—é -->
            <div class="tab-content active" id="menuTab">
                <!-- –§–∏–ª—å—Ç—Ä—ã -->
                <div class="filters-container">
                    <!-- –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–±–æ–ª—å—à–∏–µ, —Ä–æ–∑–æ–≤–∞—è –∑–∞–ª–∏–≤–∫–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ) -->
                    <div class="filter-row filter-row-large">
                        <button class="filter-btn filter-btn-large" data-filter="all" data-category="type">–í—Å–µ</button>
                        <button class="filter-btn filter-btn-large" data-filter="chrysanthemums" data-category="type">–•—Ä–∏–∑–∞–Ω—Ç–µ–º—ã</button>
                        <button class="filter-btn filter-btn-large" data-filter="exotic" data-category="type">–≠–∫–∑–æ—Ç–∏–∫–∞</button>
                        <button class="filter-btn filter-btn-large" data-filter="ranunculus" data-category="type">–†–∞–Ω—É–Ω–∫—É–ª—é—Å—ã</button>
                        <button class="filter-btn filter-btn-large" data-filter="greenery" data-category="type">–ó–µ–ª–µ–Ω—å</button>
                        <button class="filter-btn filter-btn-large" data-filter="carnations" data-category="type">–ì–≤–æ–∑–¥–∏–∫–∏</button>
                        <button class="filter-btn filter-btn-large" data-filter="conifers" data-category="type">–•–≤–æ—è</button>
                        <button class="filter-btn filter-btn-large" data-filter="bush-roses" data-category="type">–ö—É—Å—Ç–æ–≤—ã–µ —Ä–æ–∑—ã</button>
                        <button class="filter-btn filter-btn-large" data-filter="roses" data-category="type">–†–æ–∑—ã</button>
                        <button class="filter-btn filter-btn-large" data-filter="tulips" data-category="type">–¢—é–ª—å–ø–∞–Ω—ã</button>
                    </div>
                    
                    <!-- –í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (—Ü–≤–µ—Ç–∞, —Å–µ—Ä–∞—è –æ–±–≤–æ–¥–∫–∞) -->
                    <div class="filter-row filter-row-small">
                        <button class="filter-btn filter-btn-small" data-filter="pink" data-category="color">–†–æ–∑–æ–≤—ã–µ</button>
                        <button class="filter-btn filter-btn-small" data-filter="white" data-category="color">–ë–µ–ª—ã–µ</button>
                        <button class="filter-btn filter-btn-small" data-filter="green" data-category="color">–ó–µ–ª–µ–Ω—ã–µ</button>
                        <button class="filter-btn filter-btn-small" data-filter="brown" data-category="color">–ö–æ—Ä–∏—á–Ω–µ–≤—ã–µ</button>
                        <button class="filter-btn filter-btn-small" data-filter="red" data-category="color">–ö—Ä–∞—Å–Ω—ã–µ</button>
                        <button class="filter-btn filter-btn-small" data-filter="purple" data-category="color">–§–∏–æ–ª–µ—Ç–æ–≤—ã–µ</button>
                        <button class="filter-btn filter-btn-small" data-filter="orange" data-category="color">–û—Ä–∞–Ω–∂–µ–≤—ã–µ</button>
                    </div>
                    
                    <!-- –¢—Ä–µ—Ç—å—è —Å—Ç—Ä–æ–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, —Å–µ—Ä–∞—è –æ–±–≤–æ–¥–∫–∞) -->
                    <div class="filter-row filter-row-small">
                        <button class="filter-btn filter-btn-small" data-filter="aromatic" data-category="feature">–ê—Ä–æ–º–∞—Ç–Ω—ã–µ</button>
                        <button class="filter-btn filter-btn-small" data-filter="durable" data-category="feature">–°—Ç–æ–π–∫–∏–µ</button>
                        <button class="filter-btn filter-btn-small" data-filter="tall" data-category="feature">–í—ã—Å–æ–∫–∏–µ</button>
                        <button class="filter-btn filter-btn-small" data-filter="peony" data-category="feature">–ü–∏–æ–Ω–æ–≤–∏–¥–Ω—ã–µ</button>
                    </div>
                </div>
                
                <!-- –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ -->
                <div class="products-container" id="productsContainer">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
                
                <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞) -->
                <div class="go-to-cart-fixed" id="goToCartFixed" style="display: none;">
                    <div class="go-to-cart-info">
                        <span class="go-to-cart-total">–°—É–º–º–∞: <span id="fixedCartTotal">0</span> ‚ÇΩ</span>
                    </div>
                    <button class="go-to-cart-btn" onclick="switchTab('cartTab')">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ö–æ—Ä–∑–∏–Ω–∞ -->
            <div class="tab-content" id="cartTab">
                <div class="cart-page">
                    <!-- –ü—É—Å—Ç–∞—è –∫–æ—Ä–∑–∏–Ω–∞ -->
                    <div class="empty-cart-container" id="emptyCartContainer" style="display: none;">
                        <p class="empty-cart-text">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
                        <button class="go-to-catalog-btn" onclick="switchTab('menuTab')">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</button>
                    </div>
                    
                    <!-- –ö–æ—Ä–∑–∏–Ω–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏ -->
                    <div class="cart-with-items" id="cartWithItems" style="display: none;">
                        <div class="cart-items-list" id="cartItemsList"></div>
                        
                        <!-- –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–±–æ—Ä -->
                        <div class="cart-service-fee">
                            <span>–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–±–æ—Ä</span>
                            <span class="service-fee-amount">450 ‚ÇΩ</span>
                        </div>
                        
                        <!-- –î–æ—Å—Ç–∞–≤–∫–∞ -->
                        <div class="cart-delivery">
                            <div class="delivery-title">–î–æ—Å—Ç–∞–≤–∫–∞</div>
                            <div class="delivery-options">
                                <button class="delivery-option" data-delivery="spb-kad" data-price="0">
                                    –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ö–ê–î –∏ –Ω–∏–∂–µ 500—Ä
                                </button>
                                <button class="delivery-option" data-delivery="10km" data-price="900">
                                    –î–æ 10 –∫–º –æ—Ç –ö–ê–î 900‚ÇΩ
                                </button>
                                <button class="delivery-option" data-delivery="20km" data-price="1300">
                                    –î–æ 20 –∫–º –æ—Ç –ö–ê–î 1300‚ÇΩ
                                </button>
                                <button class="delivery-option active" data-delivery="pickup" data-price="0">
                                    –°–∞–º–æ–≤—ã–≤–æ–∑ 0‚ÇΩ
                                </button>
                            </div>
                        </div>
                        
                        <!-- –ë–æ–Ω—É—Å—ã -->
                        <div class="cart-bonuses">
                            <div class="bonus-header">
                                <button class="use-bonus-btn" id="useBonusBtn">–°–ø–∏—Å–∞—Ç—å –±–æ–Ω—É—Å—ã</button>
                                <input type="range" class="bonus-slider" id="bonusSlider" min="0" max="0" value="0" disabled>
                                <span class="bonus-amount" id="bonusAmount">0</span>
                            </div>
                        </div>
                        
                        <!-- –ò—Ç–æ–≥–æ -->
                        <div class="cart-final-total">
                            <div class="final-total-row">
                                <span>–ò—Ç–æ–≥–æ:</span>
                                <span class="final-total-amount" id="finalTotalAmount">0</span> ‚ÇΩ
                            </div>
                            <button class="checkout-btn-final" id="checkoutBtnFinal">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é</button>
                            
                            <!-- –ë–æ–Ω—É—Å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                            <div class="bonus-info">
                                <div class="bonus-info-row">
                                    <span>–ù–∞–∫–æ–ø–ª–µ–Ω–æ –±–æ–Ω—É—Å–æ–≤:</span>
                                    <span id="accumulatedBonuses">500</span>
                                </div>
                                <div class="bonus-info-row">
                                    <span>–ë—É–¥–µ—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–æ –∑–∞ —Ç–µ–∫—É—â–∏–π –∑–∞–∫–∞–∑:</span>
                                    <span id="bonusToEarn">0</span>
                                </div>
                                <div class="bonus-info-note">1 –±–∞–ª–ª = 1 —Ä—É–±–ª—å. –ù–∞—á–∏—Å–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ —Å–ø–∏—Å—ã–≤–∞–µ—Ç–µ –±–æ–Ω—É—Å—ã –≤ —ç—Ç–æ–º –∑–∞–∫–∞–∑–µ.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ü—Ä–æ—Ñ–∏–ª—å -->
            <div class="tab-content" id="profileTab">
                <div class="profile-page">
                    <div class="profile-header-new">
                        <img id="profileAvatarImg" src="" alt="Avatar" class="profile-avatar-img" style="display: none;">
                        <div class="profile-avatar-fallback" id="profileAvatarFallback">
                            <span id="profileInitial">üë§</span>
                        </div>
                        <h2 id="profileName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
                    </div>
                    
                    <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã -->
                    <div class="profile-section">
                        <h3 class="section-title">–ê–∫—Ç–∏–≤–Ω—ã–π –∑–∞–∫–∞–∑</h3>
                        <div class="active-orders" id="activeOrders">
                            <p class="no-orders">–£ –≤–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤</p>
                        </div>
                    </div>
                    
                    <!-- –ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ -->
                    <div class="profile-section">
                        <h3 class="section-title">–ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏</h3>
                        <div class="delivery-addresses" id="deliveryAddresses">
                            <p class="no-addresses">–ê–¥—Ä–µ—Å–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
                        </div>
                        <button class="add-address-btn">+ –î–æ–±–∞–≤–∏—Ç—å –∞–¥—Ä–µ—Å</button>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –û –ø—Ä–æ–µ–∫—Ç–µ -->
            <div class="tab-content" id="aboutTab">
                <div class="about-page">
                    <div class="about-header">
                        <div class="about-logo">üå∏</div>
                        <h2>FlowBox</h2>
                        <p class="about-tagline">–ú–∞–≥–∞–∑–∏–Ω —Ü–≤–µ—Ç–æ–≤ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π</p>
                    </div>
                    <div class="about-content">
                        <div class="about-section">
                            <h3>–û –Ω–∞—Å</h3>
                            <p>FlowBox - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –∑–∞–∫–∞–∑–∞ —Ü–≤–µ—Ç–æ–≤ —Å –±—ã—Å—Ç—Ä–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π. –ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —Å–≤–µ–∂–∏–µ –±—É–∫–µ—Ç—ã –Ω–∞ –ª—é–±–æ–π –≤–∫—É—Å –∏ —Å–ª—É—á–∞–π.</p>
                        </div>
                        <div class="about-section">
                            <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                            <p>üìû –¢–µ–ª–µ—Ñ–æ–Ω: +7 (999) 123-45-67</p>
                            <p>üìß Email: info@flowbox.ru</p>
                            <p>üìç –ê–¥—Ä–µ—Å: –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 1</p>
                        </div>
                        <div class="about-section">
                            <h3>–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã</h3>
                            <p>–ü–Ω-–í—Å: 9:00 - 21:00</p>
                            <p>–î–æ—Å—Ç–∞–≤–∫–∞: –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ</p>
                        </div>
                        <div class="about-section">
                            <h3>–í–µ—Ä—Å–∏—è</h3>
                            <p>1.0.0</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-tab="menuTab">
                <span class="nav-icon">üçΩÔ∏è</span>
                <span class="nav-label">–ú–µ–Ω—é</span>
            </button>
            <button class="nav-item" data-tab="cartTab">
                <span class="nav-icon">üõí</span>
                <span class="nav-label">–ö–æ—Ä–∑–∏–Ω–∞</span>
                <span class="nav-badge" id="navCartCount">0</span>
            </button>
            <button class="nav-item" data-tab="profileTab">
                <span class="nav-icon">üë§</span>
                <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
            </button>
            <button class="nav-item" data-tab="aboutTab">
                <span class="nav-icon">‚ÑπÔ∏è</span>
                <span class="nav-label">–û –ø—Ä–æ–µ–∫—Ç–µ</span>
            </button>
        </nav>


        <!-- –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ -->
        <div class="order-overlay" id="orderOverlay">
            <div class="order-panel">
                <div class="order-header">
                    <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
                    <button class="close-btn" id="closeOrder">‚úï</button>
                </div>
                <form class="order-form" id="orderForm">
                    <div class="form-group">
                        <label>–í–∞—à–µ –∏–º—è</label>
                        <input type="text" id="customerName" required placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤">
                    </div>
                    <div class="form-group">
                        <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        <input type="tel" id="customerPhone" required placeholder="+7 (999) 123-45-67">
                    </div>
                    <div class="form-group">
                        <label>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                        <textarea id="customerAddress" required placeholder="–ì–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞"></textarea>
                    </div>
                    <div class="form-group">
                        <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                        <textarea id="orderComment" placeholder="–û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∫ –∑–∞–∫–∞–∑—É"></textarea>
                    </div>
                    <div class="order-summary">
                        <div class="summary-item">
                            <span>–¢–æ–≤–∞—Ä–æ–≤:</span>
                            <span id="summaryItems">0</span>
                        </div>
                        <div class="summary-item">
                            <span>–°—É–º–º–∞:</span>
                            <span id="summaryTotal">0</span> ‚ÇΩ
                        </div>
                    </div>
                    <button type="submit" class="submit-order-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </form>
            </div>
        </div>

        <!-- –£—Å–ø–µ—à–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ -->
        <div class="success-overlay" id="successOverlay">
            <div class="success-panel">
                <div class="success-icon">‚úÖ</div>
                <h2>–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω!</h2>
                <p>–ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è</p>
                <button class="back-to-shop-btn" id="backToShop">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–∞–≥–∞–∑–∏–Ω</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

